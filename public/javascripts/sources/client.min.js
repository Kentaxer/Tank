!function(){function a(){requestAnimFrame(a),k.render(j)}function b(a,b){var c=new RegExp(b+"$");return c.test(a)}function c(a){var b=document.getElementById(a);b.play()}function d(){n.emit("left",null)}function e(){n.emit("right",null)}function f(){n.emit("up",null)}function g(){n.emit("down",null)}function h(){c("fire"),n.emit("fire",null)}function i(a){for(var c=a.objects,d=j.children.length-1;d>=0;d--){for(var e=j.children[d],f=!1,g=0;g<c.length;g++){var h=c[g];if(null!==h&&e.position.x==h.x&&e.position.y==h.y&&b(e.texture.baseTexture.imageUrl,h.resource)){c.splice(g,1),f=!0;break}}f||j.children.splice(d,1)}for(var i=0;i<c.length;i++){var k=c[i];if(null!==k){var l="resources/images/"+k.resource,m=PIXI.Texture.fromImage(l),n=new PIXI.Sprite(m);n.anchor.x=.5,n.anchor.y=.5,n.position.x=k.x,n.position.y=k.y,j.addChildAt(n,0)}}}var j,k,l,m,n=io();requestAnimFrame(a),$(document).keydown(function(a){switch(a.keyCode){case 65:d();break;case 87:f();break;case 68:e();break;case 83:g();break;case 74:h()}}),n.on("welcome",function(a){l=a.width,m=a.height,j=new PIXI.Stage(0),k=PIXI.autoDetectRenderer(l,m),document.body.appendChild(k.view)}),n.on("update",function(a){a&&i(a)})}();