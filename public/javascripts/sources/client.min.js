!function(){function a(){requestAnimFrame(a),h.render(g)}function b(){k.emit("left",null)}function c(){k.emit("right",null)}function d(){k.emit("up",null)}function e(){k.emit("down",null)}function f(){k.emit("fire",null)}var g,h,i,j,k=io();$(document).keydown(function(a){switch(a.keyCode){case 65:b();break;case 87:d();break;case 68:c();break;case 83:e();break;case 74:f()}}),k.on("welcome",function(a){i=a.width,j=a.height,g=new PIXI.Stage(0),h=PIXI.autoDetectRenderer(i,j),document.body.appendChild(h.view)}),k.on("update",function(b){if(b){g.children.length>0&&g.removeChildren(0,g.children.length);for(var c=b.tanks,d=b.missiles,e=0;e<c.length;e++){var f=c[e];if(null!==f){var h="resources/images/"+f.resource,i=PIXI.Texture.fromImage(h),j=new PIXI.Sprite(i);j.anchor.x=.5,j.anchor.y=.5,j.position.x=f.x,j.position.y=f.y,g.addChild(j)}}for(e=0;e<d.length;e++){var k=d[e];if(null!==k){var l="resources/images/"+k.resource,m=PIXI.Texture.fromImage(l),n=new PIXI.Sprite(m);n.anchor.x=.5,n.anchor.y=.5,n.position.x=k.x,n.position.y=k.y,g.addChild(n)}}requestAnimFrame(a)}})}();