!function(){function a(){requestAnimFrame(a),k.render(j)}function b(a,b){var c=new RegExp(b+"$");return c.test(a)}function c(a){var b=document.getElementById(a);b.play()}function d(){n.emit("left",null)}function e(){n.emit("right",null)}function f(){n.emit("up",null)}function g(){n.emit("down",null)}function h(){c("fire"),n.emit("fire",null)}function i(a){var c=a.objects,d=a.insertIndex;0===j.children.length&&(d=0);for(var e=j.children.length-1;e>=0;e--){for(var f=j.children[e],g=!1,h=0;h<c.length;h++){var i=c[h];if(null!==i&&f.position.x==i.x&&f.position.y==i.y&&b(f.texture.baseTexture.imageUrl,i.resource)){c.splice(h,1),g=!0;break}}g||j.children.splice(e,1)}for(var k=c.length-1;k>=0;k--){var l=c[k];if(null!==l){var m="resources/images/"+l.resource,n=PIXI.Texture.fromImage(m),o=new PIXI.Sprite(n);o.anchor.x=.5,o.anchor.y=.5,o.position.x=l.x,o.position.y=l.y,j.addChildAt(o,d)}}}var j,k,l,m,n=io();requestAnimFrame(a),$(document).keydown(function(a){switch(a.keyCode){case 65:d();break;case 87:f();break;case 68:e();break;case 83:g();break;case 74:h()}}),n.on("welcome",function(a){l=a.width,m=a.height,j=new PIXI.Stage(0),k=PIXI.autoDetectRenderer(l,m),document.body.appendChild(k.view)}),n.on("update",function(a){a&&i(a)})}();